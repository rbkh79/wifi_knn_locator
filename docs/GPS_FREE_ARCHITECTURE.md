# معماری GPS-Free برای مکان‌یابی Indoor و Outdoor

## مقدمه

این اپلیکیشن یک سیستم مکان‌یابی کاملاً GPS-Free است که برای محیط‌های Indoor و Outdoor طراحی شده است. تمام روش‌های مکان‌یابی بر اساس سیگنال‌های رادیویی (Wi-Fi و Cell Towers) است و هیچ وابستگی به GPS یا سرویس‌های خارجی ندارد.

## چرا GPS-Free؟

### 1. محدودیت‌های GPS در محیط‌های Indoor
- GPS در محیط‌های بسته (Indoor) دقت بسیار پایینی دارد یا اصلاً کار نمی‌کند
- سیگنال‌های GPS نمی‌توانند از سقف و دیوارها عبور کنند
- دقت GPS در محیط‌های Indoor معمولاً بیش از 10-20 متر خطا دارد

### 2. حریم خصوصی
- GPS نیاز به دسترسی به سرویس‌های خارجی دارد
- Wi-Fi Fingerprinting و Cell-based localization می‌توانند به صورت کاملاً آفلاین کار کنند
- داده‌های کاربر در دستگاه باقی می‌ماند و به سرور ارسال نمی‌شود

### 3. مصرف انرژی
- GPS مصرف انرژی بالایی دارد
- Wi-Fi و Cell scanning مصرف انرژی کمتری دارند

### 4. قابلیت اطمینان
- در محیط‌های شهری با دکل‌های فراوان، Cell-based localization قابل اعتماد است
- Wi-Fi Fingerprinting در محیط‌های Indoor دقت بهتری از GPS دارد

## معماری سیستم

### 1. Indoor Localization Service
**روش:** Wi-Fi Fingerprinting با الگوریتم KNN

**چگونگی کار:**
- اسکن Wi-Fi انجام می‌شود و BSSID و RSSI نقاط دسترسی جمع‌آوری می‌شود
- اثرانگشت‌های Wi-Fi در پایگاه داده SQLite ذخیره می‌شوند
- الگوریتم KNN برای پیدا کردن k همسایه نزدیک استفاده می‌شود
- موقعیت با میانگین وزن‌دار همسایه‌ها تخمین زده می‌شود

**دقت:** معمولاً 2-5 متر در محیط‌های Indoor

**محدودیت‌ها:**
- نیاز به مرحله آموزش (Training) دارد
- در محیط‌های جدید که اثرانگشت نداریم، کار نمی‌کند

### 2. Outdoor Localization Service
**روش:** Cell Tower Fingerprinting با الگوریتم KNN

**چگونگی کار:**
- اطلاعات دکل‌های مخابراتی (Cell ID, LAC/TAC, MCC, MNC, Signal Strength) جمع‌آوری می‌شود
- اثرانگشت‌های سلولی در پایگاه داده SQLite ذخیره می‌شوند
- الگوریتم KNN برای پیدا کردن k همسایه نزدیک استفاده می‌شود
- موقعیت با میانگین وزن‌دار همسایه‌ها تخمین زده می‌شود

**دقت:** معمولاً 50-500 متر (Coarse-Grained)

**محدودیت‌ها:**
- دقت پایین‌تر از GPS
- نیاز به مرحله آموزش دارد
- در مناطق روستایی با دکل‌های کم، دقت کاهش می‌یابد

### 3. Trajectory Service
**عملکرد:** مدیریت و پردازش مسیر حرکت کاربر

**ویژگی‌ها:**
- ذخیره موقعیت‌های تخمینی به صورت زمانی
- هموارسازی مسیر با میانگین متحرک
- محاسبه سرعت و جهت حرکت

### 4. Path Prediction Service
**روش‌ها:**
1. **مدل مارکوف:** پیش‌بینی ناحیه بعدی بر اساس الگوهای انتقال
2. **Velocity-based:** پیش‌بینی بر اساس سرعت و جهت آخرین حرکت
3. **N-gram:** پیش‌بینی بر اساس الگوهای تکراری

**دقت پیش‌بینی:** کوتاه‌مدت (چند ثانیه تا چند دقیقه)

## جریان کار (Workflow)

```
1. اسکن Wi-Fi و Cell
   ↓
2. تشخیص محیط (Indoor/Outdoor)
   ↓
3. انتخاب روش مکان‌یابی
   - Indoor → Wi-Fi Fingerprinting
   - Outdoor → Cell Tower Fingerprinting
   - Hybrid → ترکیب هر دو
   ↓
4. تخمین موقعیت با KNN
   ↓
5. ذخیره در مسیر حرکت
   ↓
6. پیش‌بینی مسیر آینده
```

## محدودیت‌ها و نقاط ضعف

### 1. نیاز به مرحله آموزش
- برای هر محیط جدید، باید اثرانگشت‌ها جمع‌آوری شوند
- این کار زمان‌بر است و نیاز به تلاش کاربر دارد

### 2. دقت Outdoor پایین‌تر از GPS
- Cell-based localization دقت در حد ناحیه‌ای دارد
- برای کاربردهای نیازمند دقت بالا (مثل ناوبری دقیق) مناسب نیست

### 3. وابستگی به زیرساخت
- Indoor: نیاز به نقاط دسترسی Wi-Fi
- Outdoor: نیاز به دکل‌های مخابراتی

### 4. پیش‌بینی مسیر محدود
- فقط برای پیش‌بینی کوتاه‌مدت مناسب است
- در الگوهای غیرمعمول، دقت کاهش می‌یابد

## مقایسه با GPS

| ویژگی | GPS-Free (این سیستم) | GPS |
|-------|---------------------|-----|
| دقت Indoor | 2-5 متر | 10-20+ متر |
| دقت Outdoor | 50-500 متر | 3-5 متر |
| نیاز به آموزش | بله | خیر |
| کار در محیط بسته | بله | خیر |
| حریم خصوصی | بالا | متوسط |
| مصرف انرژی | پایین | بالا |

## نتیجه‌گیری

این سیستم GPS-Free برای کاربردهای خاص مناسب است:
- مکان‌یابی Indoor با دقت بالا
- مکان‌یابی Outdoor در صورت عدم دسترسی به GPS
- کاربردهای تحقیقاتی و دانشگاهی
- کاربردهایی که حریم خصوصی مهم است

اما برای کاربردهای عمومی که نیاز به دقت بالا در Outdoor دارند، GPS هنوز بهترین گزینه است.

