# طرح آزمایش برای اثبات فرضیه‌های پژوهشی

## هدف
ارزیابی کمی چارچوب یکپارچه GPS-Free (وای‌فای + BTS) و اثبات اینکه **تلفیق وای‌فای و سلولی در محیط مرزی دقت را به‌طور معنادار بهبود می‌بخشد**.

---

## ۱. سناریوی تست: محیط مرزی (ورودی ساختمان)

- **مکان**: ورودی ساختمان یا ناحیه‌ای که هم سیگنال وای‌فای و هم دکل‌های مخابراتی در دسترس هستند.
- **نقاط مرجع**: حداقل ۵ نقطه با مختصات واقعی (GPS یا نقشه) به‌عنوان Ground Truth ثبت شوند.
- **شرایط**: هر نمونه در یک نقطه ثابت گرفته شود؛ ترجیحاً در زمان‌های مختلف برای کاهش واریانس وابسته به زمان.

---

## ۲. گروه‌ها و نمونه‌گیری

| گروه        | توضیح                    | تعداد نمونه |
|------------|---------------------------|-------------|
| **کنترل**  | فقط وای‌فای (Indoor-only) | ۲۰          |
| **آزمایش** | تلفیقی (Hybrid: وای‌فای + BTS) | ۲۰          |

- در هر نقطه مرجع، **۲۰ اندازه‌گیری** برای گروه کنترل (فقط وای‌فای) و **۲۰ اندازه‌گیری** برای گروه آزمایش (حالت Hybrid).
- جمعاً حداقل **۴۰ نمونه** در هر نقطه (در صورت چند نقطه: ۴۰ × تعداد نقاط).

---

## ۳. متغیرهای اندازه‌گیری

- **ورودی**: موقعیت واقعی (lat_true, lon_true) و خروجی تخمین (lat_est, lon_est).
- **خطای هر نمونه**: فاصله اقلیدسی به متر  
  `error_i = haversine(lat_true, lon_true, lat_est, lon_est)` (یا تقریب متری مناسب).

---

## ۴. شاخص‌های ارزیابی

- **خطای میانگین (MAE – Mean Absolute Error)** به متر:  
  `MAE = (1/n) Σ error_i`
- **خطای ۹۰ درصدی (P90)**: مقداری که ۹۰٪ خطاها کوچک‌تر یا مساوی آن هستند (صدک ۹۰).
- **انحراف معیار خطا (σ)** برای گزارش پراکندگی.

---

## ۵. آزمون آماری: t جفتی (Paired t-test)

- هر نمونه کنترل با نمونه آزمایش **جفت** می‌شود (همان نقطه، همان شرایط).
- فرض صفر (H0): میانگین خطا در دو روش برابر است.  
  فرض مقابل (H1): میانگین خطا در روش تلفیقی **کمتر** است (یک‌طرفه).
- سطح معناداری: α = ۰٫۰۵.
- اگر **p-value < 0.05** → بهبود تلفیق از نظر آماری معنادار است.

---

## ۶. خروجی برای دفاعیه

1. **جدول خلاصه**: MAE و P90 برای هر دو گروه (کنترل و آزمایش).
2. **نمودار خطا**: مثلاً جعبه‌ای (box plot) خطا برای کنترل در مقابل آزمایش.
3. **نقشه حرارتی دقت**: در صورت داشتن چند نقطه، رنگ/مقیاس بر اساس MAE یا P90 در هر نقطه.
4. **گزارش t-test**: مقدار t، درجه آزادی، p-value و نتیجه (رد یا عدم رد H0).

---

## ۷. نحوه جمع‌آوری داده در اپ

- در حالت **کنترل**: فقط مکان‌یابی Indoor (وای‌فای) فعال باشد و نتیجه ذخیره شود.
- در حالت **آزمایش**: مکان‌یابی یکپارچه (Unified) با Hybrid فعال باشد و نتیجه ذخیره شود.
- هر رکورد شامل: `lat_true, lon_true, lat_est, lon_est, method (wifi_only | hybrid), point_id, sample_id`.

خروجی را می‌توان به صورت CSV export کرد و با اسکریپت پایتون ارزیابی (مثلاً `evaluate_experiment.py`) تحلیل کرد.
